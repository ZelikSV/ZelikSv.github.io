"use strict";!function(){var c=angular.module("myApp",[]);window.myApp=c}(),myApp.service("currencyService",["$http",function(c){var t=this;this.list=[],this.loadCache=function(){return c.get("https://api.privatbank.ua/p24api/pubinfo?json&exchange&coursid=5").then(function(c){c.data.forEach(function(c){return t.list.push(c)}),t.list.push({ccy:"UAH",buy:"1",sale:"1"})}),t.list},this.convertToUa=function(c,t){return c*t},this.convertFromUa=function(c,t){return c/t},this.countTax=function(c,t){return c*t/100}}]),myApp.constant("mainConstants",{percentageTax:[0,1,2,3,4,5],cities:["Kiev","Dnieper","Kharkov","Lvov","Zaporozhye","Krivoy Rog"],currency:[{ccy:"USD",buy:"26.80000",sale:"27.10000",$$hashKey:"object:3"},{ccy:"EUR",buy:"30.30000",sale:"30.80000",$$hashKey:"object:7"}]}),myApp.filter("currencyFilter",function(){return function(c,t){return c.filter(function(c){return c.ccy!==t})}}),myApp.controller("myController",["currencyService","mainConstants","$scope",function(t,c,n){var e=this;this.countVal=null,this.costVal=null,this.currency=t.loadCache(),this.currencyFrom=c.currency[0],this.currencyTo=c.currency[1],this.percentageTax=c.percentageTax,this.citiesLocation=c.cities,this.city=c.cities[0],this.taxValue=c.percentageTax[0],n.$watch("mc.currencyFrom",function(){e.convertValue()}),n.$watch("mc.currencyTo",function(){e.convertValue()}),n.$watch("mc.countVal",function(){e.convertValue()}),n.$watch("mc.taxValue",function(){e.takeFee()}),this.changeValues=function(){var c=[e.costVal,e.countVal];e.countVal=c[0],e.costVal=c[1];var t=[e.currencyTo,e.currencyFrom];e.currencyFrom=t[0],e.currencyTo=t[1]},this.convertValue=function(){var c=t.convertToUa(e.countVal,e.currencyFrom.buy);e.costVal=t.convertFromUa(c,e.currencyTo.sale)},this.takeFee=function(){e.convertValue(),e.costVal-=t.countTax(e.costVal,e.taxValue)}}]);