"use strict";!function(){var n=angular.module("myApp",[]);window.myApp=n}(),myApp.service("currencyService",["$http",function(n){var r=this;this.list=[],this.loadCache=function(){return n.get("https://api.privatbank.ua/p24api/pubinfo?json&exchange&coursid=5").then(function(n){var t=n.data;return angular.copy(t,r.list)}),r.list},this.convertToUa=function(n,t){return Math.round(n*t)},this.convertFromUa=function(n,t){var r=0;return r=n/t,r=Number(r.toFixed(2))},this.addCommission=function(n,t){return n*t/100}}]),myApp.constant("mainConstants",{percentageTax:[0,1,2,3,4,5],cities:["Kiev","Dnieper","Kharkov","Lvov","Zaporozhye","Krivoy Rog"]}),myApp.controller("myController",["currencyService","mainConstants",function(r,n){var c=this;this.activeTab=!0,this.countVal=null,this.costVal=null,this.currency=r.loadCache(),this.currencyFrom="USD",this.currencyTo="EUR",this.percentageTax=n.percentageTax,this.citiesLocation=n.cities,this.changeValues=function(){var n=[c.costVal,c.countVal];c.countVal=n[0],c.costVal=n[1];var t=[c.currencyTo,c.currencyFrom];c.currencyFrom=t[0],c.currencyTo=t[1]},this.convertValue=function(){var t=0;c.currency.forEach(function(n){n.ccy===c.currencyFrom&&(t=r.convertToUa(c.countVal,n.buy))}),c.currency.forEach(function(n){n.ccy===c.currencyTo&&(c.costVal=r.convertFromUa(t,n.sale))})},this.addCommissions=function(n){c.convertValue(),c.costVal-=r.addCommission(c.costVal,n.target.value)}}]),myApp.filter("currencyFilter",function(){return function(n,t){return n.filter(function(n){return n.ccy!==t})}});