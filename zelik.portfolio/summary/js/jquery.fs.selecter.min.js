!function(u,r){"use strict";function a(e,t){if(!e.hasClass("selecter-element")){(t=u.extend({},t,e.data("selecter-options"))).multiple=e.prop("multiple"),t.disabled=e.is(":disabled"),t.external&&(t.links=!0);var s=e.find("[selected]").not(":disabled"),l=e.find("option").index(s);t.multiple||""===t.label?t.label="":(e.prepend('<option value="" class="selecter-placeholder" selected>'+t.label+"</option>"),-1<l&&l++);var r=e.find("option, optgroup"),a=r.filter("option");s.length||(s=a.eq(0));var o=-1<l?l:0,i=""!==t.label?t.label:s.text();t.tabIndex=e[0].tabIndex,e[0].tabIndex=-1;var n="",c="";c+='<div class="selecter '+t.customClass,q?c+=" mobile":t.cover&&(c+=" cover"),t.multiple?c+=" multiple":c+=" closed",t.disabled&&(c+=" disabled"),c+='" tabindex="'+t.tabIndex+'">',c+="</div>",t.multiple||(n+='<span class="selecter-selected">',n+=u("<span></span>").text(y(i,t.trim)).html(),n+="</span>"),n+='<div class="selecter-options">',n+="</div>",e.addClass("selecter-element").wrap(c).after(n);var d=e.parent(".selecter"),p=u.extend({$select:e,$allOptions:r,$options:a,$selecter:d,$selected:d.find(".selecter-selected"),$itemsWrapper:d.find(".selecter-options"),index:-1,guid:k++},t);f(p),p.multiple||C(o,p),void 0!==u.fn.scroller&&p.$itemsWrapper.scroller(),p.$selecter.on("touchstart.selecter",".selecter-selected",p,v).on("click.selecter",".selecter-selected",p,$).on("click.selecter",".selecter-item",p,m).on("close.selecter",p,h).data("selecter",p),p.$select.on("change.selecter",p,b),q||(p.$selecter.on("focusin.selecter",p,g).on("blur.selecter",p,x),p.$select.on("focusin.selecter",p,function(e){e.data.$selecter.trigger("focus")}))}}function f(e){for(var t="",s=e.links?"a":"span",l=0,r=e.$allOptions.length;l<r;l++){var a=e.$allOptions.eq(l);if("OPTGROUP"===a[0].tagName)t+='<span class="selecter-group',a.is(":disabled")&&(t+=" disabled"),t+='">'+a.attr("label")+"</span>";else{var o=a.val();a.attr("value")||a.attr("value",o),t+="<"+s+' class="selecter-item',a.hasClass("selecter-placeholder")&&(t+=" placeholder"),a.is(":selected")&&(t+=" selected"),a.is(":disabled")&&(t+=" disabled"),t+='" ',e.links?t+='href="'+o+'"':t+='data-value="'+o+'"',t+=">"+u("<span></span>").text(y(a.text(),e.trim)).html()+"</"+s+">",0}}e.$itemsWrapper.html(t),e.$items=e.$selecter.find(".selecter-item")}function v(e){e.stopPropagation();var t=e.data;t.touchStartEvent=e.originalEvent,t.touchStartX=t.touchStartEvent.touches[0].clientX,t.touchStartY=t.touchStartEvent.touches[0].clientY,t.$selecter.on("touchmove.selecter",".selecter-selected",t,s).on("touchend.selecter",".selecter-selected",t,l)}function s(e){var t=e.data,s=e.originalEvent;(10<Math.abs(s.touches[0].clientX-t.touchStartX)||10<Math.abs(s.touches[0].clientY-t.touchStartY))&&t.$selecter.off("touchmove.selecter touchend.selecter")}function l(e){var t=e.data;t.touchStartEvent.preventDefault(),t.$selecter.off("touchmove.selecter touchend.selecter"),$(e)}function $(e){e.preventDefault(),e.stopPropagation();var t=e.data;if(!t.$select.is(":disabled"))if(u(".selecter").not(t.$selecter).trigger("close.selecter",[t]),t.mobile||!q||p)t.$selecter.hasClass("closed")?function(e){e.preventDefault(),e.stopPropagation();var t=e.data;if(!t.$selecter.hasClass("open")){var s=t.$selecter.offset(),l=P.outerHeight(),r=t.$itemsWrapper.outerHeight(!0);0<=t.index&&t.$items.eq(t.index).position();s.top+r>l&&t.$selecter.addClass("bottom"),t.$itemsWrapper.show(),t.$selecter.removeClass("closed").addClass("open"),P.on("click.selecter-"+t.guid,":not(.selecter-options)",t,o),n(t)}}(e):t.$selecter.hasClass("open")&&h(e);else{var s=t.$select[0];if(r.document.createEvent){var l=r.document.createEvent("MouseEvents");l.initMouseEvent("mousedown",!1,!0,r,0,0,0,0,0,!1,!1,!1,!1,0,null),s.dispatchEvent(l)}else s.fireEvent&&s.fireEvent("onmousedown")}}function o(e){e.preventDefault(),e.stopPropagation(),0===u(e.currentTarget).parents(".selecter").length&&h(e)}function h(e){e.preventDefault(),e.stopPropagation();var t=e.data;t.$selecter.hasClass("open")&&(t.$itemsWrapper.hide(),t.$selecter.removeClass("open bottom").addClass("closed"),P.off(".selecter-"+t.guid))}function m(e){e.preventDefault(),e.stopPropagation();var t=u(this),s=e.data;if(!s.$select.is(":disabled")){if(s.$itemsWrapper.is(":visible")){var l=s.$items.index(t);l!==s.index&&(C(l,s),c(s))}s.multiple||h(e)}}function b(e,t){var s,l=u(this),r=e.data;t||r.multiple||(C(r.$options.index(r.$options.filter("[value='"+("string"==typeof(s=l.val())?s.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"):s)+"']")),r),c(r))}function g(e){e.preventDefault(),e.stopPropagation();var t=e.data;t.$select.is(":disabled")||t.multiple||(t.$selecter.addClass("focus").on("keydown.selecter-"+t.guid,t,i),u(".selecter").not(t.$selecter).trigger("close.selecter",[t]))}function x(e,t,s){e.preventDefault(),e.stopPropagation();var l=e.data;l.$selecter.removeClass("focus").off("keydown.selecter-"+l.guid),l.$selecter.hasClass("open")&&(h(e),C(l.index,l)),c(l)}function i(e){var t=e.data;if(13===e.keyCode)t.$selecter.hasClass("open")&&(h(e),C(t.index,t)),c(t);else if(!(9===e.keyCode||e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)){e.preventDefault(),e.stopPropagation();var s=t.$items.length-1,l=t.index<0?0:t.index;if(-1<u.inArray(e.keyCode,d?[38,40,37,39]:[38,40]))(l+=38===e.keyCode||d&&37===e.keyCode?-1:1)<0&&(l=0),s<l&&(l=s);else{var r,a=String.fromCharCode(e.keyCode).toUpperCase();for(r=t.index+1;r<=s;r++)if(t.$options.eq(r).text().charAt(0).toUpperCase()===a){l=r;break}if(l<0||l===t.index)for(r=0;r<=s;r++)if(t.$options.eq(r).text().charAt(0).toUpperCase()===a){l=r;break}}0<=l&&(C(l,t),n(t))}}function C(e,t){var s=t.$items.eq(e),l=s.hasClass("selected");if(!s.hasClass("disabled"))if(t.multiple)l?(t.$options.eq(e).prop("selected",null),s.removeClass("selected")):(t.$options.eq(e).prop("selected",!0),s.addClass("selected"));else if(-1<e&&e<t.$items.length){var r=s.html();s.data("value");t.$selected.html(r).removeClass("placeholder"),t.$items.filter(".selected").removeClass("selected"),t.$select[0].selectedIndex=e,s.addClass("selected"),t.index=e}else""!==t.label&&t.$selected.html(t.label)}function n(e){var t=e.$items.eq(e.index),s=0<=e.index&&!t.hasClass("placeholder")?t.position():{left:0,top:0};void 0!==u.fn.scroller?e.$itemsWrapper.scroller("scroll",e.$itemsWrapper.find(".scroller-content").scrollTop()+s.top,0).scroller("reset"):e.$itemsWrapper.scrollTop(e.$itemsWrapper.scrollTop()+s.top)}function c(e){var t,s;e.links?(s=(t=e).$select.val(),t.external?r.open(s):r.location.href=s):(e.callback.call(e.$selecter,e.$select.val(),e.index),e.$select.trigger("change",[!0]))}function y(e,t){return 0===t?e:e.length>t?e.substring(0,t)+"...":e}var k=0,e=r.navigator.userAgent||r.navigator.vendor||r.opera,d=/Firefox/i.test(e),q=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(e),p=d&&q,P=null,E={callback:u.noop,cover:!1,customClass:"",label:"",external:!1,links:!1,mobile:!1,trim:0},t={defaults:function(e){return E=u.extend(E,e||{}),u(this)},disable:function(r){return u(this).each(function(e,t){var s=u(t).parent(".selecter").data("selecter");if(s)if(void 0!==r){var l=s.$items.index(s.$items.filter("[data-value="+r+"]"));s.$items.eq(l).addClass("disabled"),s.$options.eq(l).prop("disabled",!0)}else s.$selecter.hasClass("open")&&s.$selecter.find(".selecter-selected").trigger("click.selecter"),s.$selecter.addClass("disabled"),s.$select.prop("disabled",!0)})},destroy:function(){return u(this).each(function(e,t){var s=u(t).parent(".selecter").data("selecter");s&&(s.$selecter.hasClass("open")&&s.$selecter.find(".selecter-selected").trigger("click.selecter"),void 0!==u.fn.scroller&&s.$selecter.find(".selecter-options").scroller("destroy"),s.$select[0].tabIndex=s.tabIndex,s.$select.find(".selecter-placeholder").remove(),s.$selected.remove(),s.$itemsWrapper.remove(),s.$selecter.off(".selecter"),s.$select.off(".selecter").removeClass("selecter-element").show().unwrap())})},enable:function(r){return u(this).each(function(e,t){var s=u(t).parent(".selecter").data("selecter");if(s)if(void 0!==r){var l=s.$items.index(s.$items.filter("[data-value="+r+"]"));s.$items.eq(l).removeClass("disabled"),s.$options.eq(l).prop("disabled",!1)}else s.$selecter.removeClass("disabled"),s.$select.prop("disabled",!1)})},refresh:function(){return t.update.apply(u(this))},update:function(){return u(this).each(function(e,t){var s=u(t).parent(".selecter").data("selecter");if(s){var l=s.index;s.$allOptions=s.$select.find("option, optgroup"),s.$options=s.$allOptions.filter("option"),s.index=-1,l=s.$options.index(s.$options.filter(":selected")),f(s),s.multiple||C(l,s)}})}};u.fn.selecter=function(e){return t[e]?t[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?this:function(e){e=u.extend({},E,e||{}),null===P&&(P=u("body"));for(var t=u(this),s=0,l=t.length;s<l;s++)a(t.eq(s),e);return t}.apply(this,arguments)},u.selecter=function(e){"defaults"===e&&t.defaults.apply(this,Array.prototype.slice.call(arguments,1))}}(jQuery,window);